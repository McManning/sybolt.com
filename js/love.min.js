/*! Sybolt 13-02-2016 */
function weightLanguage(a,b){"undefined"==typeof b&&(b=!1);for(var c=[[90,"loves","love"],[80,"is really into","are really into"],[70,"is somewhat into","are somewhat into"],[60,"slightly likes","slightly like"],[50,"is indifferent about","are indifferent about"],[40,"slightly dislikes","slightly dislike"],[30,"dislikes","dislike"],[10,"definitely opposed to","are definitely opposed to"],[0,"hates","hate"]],d=0;d<c.length;d++)if(a>=c[d][0])return b?c[d][2]:c[d][1]}function prefixLanguage(a){return"Switch"===a?"":"Vanilla"===a||"Submissive"===a||"Dominant"===a?"being":"A"===a[0]||"E"===a[0]||"O"===a[0]?"being an":"being a"}function aOrAn(a){return"A"===a[0]||"E"===a[0]||"O"===a[0]?"an ":"a "}function catsHtml(a){return"string"==typeof a?'<span class="category">'+a.trim()+"</span>":a.length<2?'<span class="category">'+a[0].trim()+"</span>":'<span class="category">'+a[0].trim()+'</span> / <span class="category">'+a[1].trim()+"</span>"}function bottomCategoriesLanguage(){var a='<span class="person">'+g_dataset.individuals[0].name+"</span>",b=('<span class="person">'+g_dataset.individuals[1].name+"</span>",g_dataset.comparative[g_dataset.comparative.length-1][0].split("<br>")),c=g_dataset.comparative[g_dataset.comparative.length-2][0].split("<br>"),d="Neither of them seem to enjoy having "+aOrAn(c[0])+catsHtml(c)+" relationship ";return c.length>1&&(d+="where "+a+" is the "+catsHtml(c[0])),d+=", and are definitely opposed to acting out "+catsHtml(b)+" together."}function leftHighVsLowCategoriesLanguage(){var a,b,c='<span class="person">'+g_dataset.individuals[0].name+"</span>",d='<span class="person">'+g_dataset.individuals[1].name+"</span>",e=0,f=0,g=g_dataset.comparative.concat().sort(comparativeSortWeightedAverages);g.splice(0,3);for(var h=0;h<g.length;h++)a=g[h][1],b=g[h][2],Math.abs(a-b)>e&&a>b&&(e=Math.abs(a-b),f=h);var i=g[f][0].split("<br>"),j=c+" seems to enjoy having "+aOrAn(i[0])+catsHtml(i)+" relationship";return i.length>1&&(j+=" with "+c+" as the "+catsHtml(i[0])),j+=", but "+d+" doesn't quite feel that way."}function rightHighVsLowCategoriesLanguage(){var a,b,c='<span class="person">'+g_dataset.individuals[0].name+"</span>",d='<span class="person">'+g_dataset.individuals[1].name+"</span>",e=0,f=0,g=g_dataset.comparative.concat().sort(comparativeSortWeightedAverages);g.splice(0,3);for(var h=0;h<g.length;h++)a=g[h][1],b=g[h][2],Math.abs(a-b)>e&&b>a&&(e=Math.abs(a-b),f=h);var i=g[f][0].split("<br>"),j="Likewise, "+d+" is into ";return i.length>1&&(j+=" being the "+catsHtml(i[1])+" in "),j+=aOrAn(i[0])+catsHtml(i)+" relationship, but "+c+" would be opposed to it."}function finalResultLanguage(){g_dataset.comparative.sort(comparativeSortWeightedAverages);var a=g_dataset.comparative[0][3];return a>90?"Nothing in the world would be able to keep these two apart!":a>80?"Overall, a huge success! Start writing that fanfic boys!":a>70?"A better chance than most relationships. Go for it!":a>60?"Pretty average, but if both are willing to try new things, it could work!":a>50?"A little creativity could still make this work! Get on it!":"Mathematically, this wouldn't work out :("}function topCategoryLanguage(){var a,b=g_dataset.comparative[0][0].split("<br>"),c=g_dataset.comparative[0][3],d='<span class="person">'+g_dataset.individuals[1].name+"</span>",e=function(){return b.length<2?'<span class="category">'+b[0].trim()+"</span>":'<span class="category">'+b[0].trim()+'</span> / <span class="category">'+b[1].trim()+"</span>"};return c>=90?(a="Both are absolutely in love with acting out their "+e()+" fantasties",b.length>1&&(a+=", with "+d+' as the <span class="category">'+b[1].trim()+"</span>"),a+="Vanilla"===b[0]?". While it's not the kinkiest, they're both into it enough to make it amazing!":". Plane tickets need to be ordered tonight!"):c>=80?(a="Both will absolutely enjoy playing out their "+e()+" fantasties",b.length>1&&(a+=", with "+d+' as the <span class="category">'+b[1].trim()+"</span>"),a+="Vanilla"===b[0]?". While it's not the kinkiest, they can still be successful with it.":". This is an opportunity that can't be passed up!"):c>=70?(a="Both are definitely into having "+aOrAn(b[0])+e()+" relationship",b.length>1&&(a+=", with "+d+' as the <span class="category">'+b[1]+"</span>"),a+="Vanilla"===b[0]?". While it's not the kinkiest, they can still be successful with it!":". If they were to bump uglies tonight, this would be the way to go."):c>=50?(a="Both are definitely into having "+aOrAn(b[0])+e()+" relationship",a="There might be some bumps along the way, but it can work if they have a "+e()+" relationship with one another."):a=" Best they could do is have "+aOrAn(b[0])+e()+" relationship. It probably won't work out, but they don't have much else in common.",a}function summaryLanguage(a){var b=a[0].split("<br>");return b.length<2?"Chance of success in "+aOrAn(a[0])+catsHtml(a[0])+" relationship":"Chance of success in "+aOrAn(b[0])+catsHtml(b)+' relationship, with <span class="person">'+g_dataset.individuals[0].name+"</span> as the "+b[0]}function comparativeSortLeft(a,b){return b[1]-a[1]}function comparativeSortRight(a,b){return b[2]-a[2]}function comparativeSortWeightedAverages(a,b){return b[3]-a[3]}function categoriesSortPercent(a,b){return b[1]-a[1]}function drawShippingDetails(){$(".analysis .person-left").html(g_dataset.individuals[0].name),$(".analysis .person-right").html(g_dataset.individuals[1].name),Highcharts.setOptions(Highcharts.darkTheme);var a=[],b=[],c=[],d=[],e=comparativeSortLeft,f=g_dataset.comparative.length,g=$("section.analysis");g.hasClass("sort-averages")&&(e=comparativeSortWeightedAverages),g_dataset.comparative.sort(e);for(var h=0;f>h;h++)a.push(g_dataset.comparative[h][0]),b.push(g_dataset.comparative[h][1]),c.push(g_dataset.comparative[h][2]),d.push(g_dataset.comparative[h][3]);$("#shipping-chart-container").removeClass("rendered").off("renderChart"),$("#shipping-chart-container").highcharts({title:{text:""},xAxis:{categories:a},tooltip:{formatter:function(){if("Weighted Average"===this.series.name)return"Weighted Average: "+this.y+"%";var a,b=this.x.split("<br>");return a=b.length<2?this.x.trim():this.series.name===g_dataset.individuals[0].name?b[0].trim():b[1].trim(),this.series.name+"<br>"+this.y+"% "+a}},series:[{type:"column",name:g_dataset.individuals[0].name,data:b,cursor:"help",animation:{duration:1e3},point:{events:{click:function(a){var b=this.category.split("<br>");showMoreInformation(b.length>1?b[0].trim():this.category.trim())}}}},{type:"column",name:g_dataset.individuals[1].name,data:c,cursor:"help",animation:{duration:1e3},point:{events:{click:function(a){var b=this.category.split("<br>");showMoreInformation(b.length>1?b[1].trim():this.category.trim())}}}},{type:"spline",name:"Weighted Average",data:d,animation:{duration:2e3},marker:{lineWidth:2,lineColor:Highcharts.getOptions().colors[3],fillColor:"white"}}]})}function drawShippingGraph(){$("#shipping-chart-container").trigger("renderChart")}function drawIndividualAnalysisDetails(a,b){b.categories.sort(categoriesSortPercent);var c=b.categories[0],d=b.categories[1],e=b.categories[b.categories.length-1],f=b.categories[b.categories.length-2];a.find(".person").html(b.name),a.find(".top-1").html(c[0]),a.find(".top-2").html(b.categories[1][0]),a.find(".bottom-1").html(e[0]),a.find(".bottom-2").html(f[0]),a.find(".top-phrase").html(weightLanguage(c[1])+" "+prefixLanguage(c[0])+' <span class="category">'+c[0]+"</span> and "+weightLanguage(d[1])+" "+prefixLanguage(d[0])+' <span class="category">'+d[0]+"</span>"),a.find(".bottom-phrase").html(weightLanguage(f[1])+" "+prefixLanguage(f[0])+' <span class="category">'+f[0]+"</span> and "+weightLanguage(e[1])+" "+prefixLanguage(e[0])+' <span class="category">'+e[0]+"</span>")}function drawIndividualAnalysisChart(a,b,c){var d=[],e=[];c.categories.sort(categoriesSortPercent);for(var f=0;5>f;f++)d.push(c.categories[f][0]),e.push(c.categories[f][1]);Highcharts.setOptions(Highcharts.pinkTheme),a.find(".chart-container").removeClass("rendered").off("renderChart"),a.find(".chart-container").highcharts({colors:[b],chart:{polar:!0,type:"area"},title:{text:""},pane:{size:"80%"},tooltip:{formatter:function(){return this.y+"% "+this.x}},xAxis:{categories:d,tickmarkPlacement:"on",lineWidth:0},yAxis:{gridLineInterpolation:"polygon",lineWidth:0,min:0},legend:{enabled:!1},series:[{data:e,pointPlacement:"off",cursor:"help",animation:{duration:2e3},point:{events:{click:function(){showMoreInformation(this.category)}}}}]})}function drawSideBySideDetails(){drawIndividualAnalysisDetails($(".side-by-side-left"),g_dataset.individuals[0]),drawIndividualAnalysisDetails($(".side-by-side-right"),g_dataset.individuals[1]),drawIndividualAnalysisChart($(".side-by-side-left"),"#64B5F6",g_dataset.individuals[0]),drawIndividualAnalysisChart($(".side-by-side-right"),"#81C784",g_dataset.individuals[1])}function drawSideBySideCharts(){$(".side-by-side-left .chart-container").trigger("renderChart"),$(".side-by-side-right .chart-container").trigger("renderChart")}function drawFinalResultsCounters(){g_dataset.comparative.sort(comparativeSortWeightedAverages),new CountUp("top-1-percent",0,g_dataset.comparative[0][3]).start(),new CountUp("top-2-percent",0,g_dataset.comparative[1][3]).start(),new CountUp("top-3-percent",0,g_dataset.comparative[2][3]).start()}function drawFinalResultsDetails(){g_dataset.comparative.sort(comparativeSortWeightedAverages);var a=$("section.results");a.find(".top-1-info").html(summaryLanguage(g_dataset.comparative[0])),a.find(".top-2-info").html(summaryLanguage(g_dataset.comparative[1])),a.find(".top-3-info").html(summaryLanguage(g_dataset.comparative[2])),a.find(".top-details").html(topCategoryLanguage()),a.find(".bottom-details").html(bottomCategoriesLanguage()),a.find(".left-difference").html(leftHighVsLowCategoriesLanguage()),a.find(".right-difference").html(rightHighVsLowCategoriesLanguage()),a.find(".success-or-fail p").html(finalResultLanguage()),g_dataset.comparative[0][3]>50?a.find(".success-or-fail i").addClass("teehee").html("favorite"):a.find(".success-or-fail i").removeClass("teehee").html("block")}function resetAnimations(){Materialize.scrollFire([{selector:".side-by-side",offset:400,callback:"drawSideBySideCharts()"},{selector:".analysis",offset:400,callback:"drawShippingGraph()"},{selector:".results",offset:400,callback:"drawFinalResultsCounters()"}]),"function"==typeof Event&&window.dispatchEvent(new Event("scroll"))}function redrawDetails(){drawFinalResultsDetails(),drawSideBySideDetails(),drawShippingDetails()}function loadShipping(){var a=$("a.shipping-left").html(),b=$("a.shipping-right").html();$(".shipping-list a").each(function(){$(this).html()===a||$(this).html()===b?$(this).hide():$(this).show()});var c="/love/"+a+"/x/"+b;$.getJSON(c).done(function(d){g_dataset=d,redrawDetails(),resetAnimations(),history.pushState({},a+" x "+b,c)}),$(".sort-shipping").html("sort by averages"),$("section.analysis").removeClass("sort-averages")}function showMoreInformation(a){$(".lean-overlay").click();var b=$('.modal-tmyk[data-category="'+a+'"]');b.length>0&&b.openModal()}!function(a){function b(a){var b=this,c=$(this.chart.container.parentNode);c.hasClass("rendered")&&a.call(b),c.on("renderChart",function(){$(this).addClass("rendered"),"Weighted Average"===b.name?setTimeout(function(){b.hasOwnProperty("chart")&&a.call(b)},800):a.call(b)})}a.wrap(a.Series.prototype,"render",b)}(Highcharts),Highcharts.pinkTheme={colors:["#81C784","#64b5f6","#EF5350"],chart:{backgroundColor:"#EF5350",style:{fontFamily:"'Roboto', sans-serif"},plotBorderColor:"#212121"},xAxis:{gridLineColor:"#212121",labels:{style:{color:"#FFFFFF"}}},yAxis:{gridLineColor:"#212121",labels:{style:{color:"#E0E0E3"}}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.85)",style:{color:"#F0F0F0"}},plotOptions:{series:{dataLabels:{color:"#B0B0B3"},marker:{lineColor:"#333"}},boxplot:{fillColor:"#505053"},candlestick:{lineColor:"white"},errorbar:{color:"white"}},legend:{itemStyle:{color:"#E0E0E3"},itemHoverStyle:{color:"#FFF"},itemHiddenStyle:{color:"#606063"}},credits:{style:{color:"#EF5350"}},labels:{style:{color:"#707073"}},drilldown:{activeAxisLabelStyle:{color:"#F0F0F3"},activeDataLabelStyle:{color:"#F0F0F3"}},navigation:{buttonOptions:{symbolStroke:"#DDDDDD",theme:{fill:"#505053"}}},rangeSelector:{buttonTheme:{fill:"#505053",stroke:"#000000",style:{color:"#CCC"},states:{hover:{fill:"#707073",stroke:"#000000",style:{color:"white"}},select:{fill:"#000003",stroke:"#000000",style:{color:"white"}}}},inputBoxBorderColor:"#505053",inputStyle:{backgroundColor:"#333",color:"silver"},labelStyle:{color:"silver"}},navigator:{handles:{backgroundColor:"#666",borderColor:"#AAA"},outlineColor:"#CCC",maskFill:"rgba(255,255,255,0.1)",series:{color:"#7798BF",lineColor:"#A6C7ED"},xAxis:{gridLineColor:"#505053"}},scrollbar:{barBackgroundColor:"#808083",barBorderColor:"#808083",buttonArrowColor:"#CCC",buttonBackgroundColor:"#606063",buttonBorderColor:"#606063",rifleColor:"#FFF",trackBackgroundColor:"#404043",trackBorderColor:"#404043"},legendBackgroundColor:"rgba(0, 0, 0, 0.5)",background2:"#505053",dataLabelsColor:"#B0B0B3",textColor:"#C0C0C0",contrastTextColor:"#F0F0F3",maskColor:"rgba(255,255,255,0.3)"},Highcharts.darkTheme={colors:["#64B5F6","#81C784","#EF5350"],chart:{backgroundColor:"#212121",style:{fontFamily:"'Roboto', sans-serif"},plotBorderColor:"#606063"},xAxis:{gridLineColor:"#707073",labels:{style:{color:"#FFFFFF"}},lineColor:"#707073",minorGridLineColor:"#505053",tickColor:"#707073",title:{style:{color:"#A0A0A3"}}},yAxis:{gridLineColor:"#707073",labels:{style:{color:"#E0E0E3"}},lineColor:"#707073",minorGridLineColor:"#505053",tickColor:"#707073",tickWidth:1,title:{style:{color:"#A0A0A3"}}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.85)",style:{color:"#F0F0F0"}},plotOptions:{series:{dataLabels:{color:"#B0B0B3"},marker:{lineColor:"#333"}},boxplot:{fillColor:"#505053"},candlestick:{lineColor:"white"},errorbar:{color:"white"}},legend:{itemStyle:{color:"#E0E0E3"},itemHoverStyle:{color:"#FFF"},itemHiddenStyle:{color:"#606063"}},credits:{style:{color:"#212121"}},labels:{style:{color:"#707073"}},drilldown:{activeAxisLabelStyle:{color:"#F0F0F3"},activeDataLabelStyle:{color:"#F0F0F3"}},navigation:{buttonOptions:{symbolStroke:"#DDDDDD",theme:{fill:"#505053"}}},rangeSelector:{buttonTheme:{fill:"#505053",stroke:"#000000",style:{color:"#CCC"},states:{hover:{fill:"#707073",stroke:"#000000",style:{color:"white"}},select:{fill:"#000003",stroke:"#000000",style:{color:"white"}}}},inputBoxBorderColor:"#505053",inputStyle:{backgroundColor:"#333",color:"silver"},labelStyle:{color:"silver"}},navigator:{handles:{backgroundColor:"#666",borderColor:"#AAA"},outlineColor:"#CCC",maskFill:"rgba(255,255,255,0.1)",series:{color:"#7798BF",lineColor:"#A6C7ED"},xAxis:{gridLineColor:"#505053"}},scrollbar:{barBackgroundColor:"#808083",barBorderColor:"#808083",buttonArrowColor:"#CCC",buttonBackgroundColor:"#606063",buttonBorderColor:"#606063",rifleColor:"#FFF",trackBackgroundColor:"#404043",trackBorderColor:"#404043"},legendBackgroundColor:"rgba(0, 0, 0, 0.5)",background2:"#505053",dataLabelsColor:"#B0B0B3",textColor:"#C0C0C0",contrastTextColor:"#F0F0F3",maskColor:"rgba(255,255,255,0.3)"};var g_dataset=null,g_teehee=new Audio("/img/love/teehee.mp3");$(function(){$("select").material_select(),$(".modal-trigger").leanModal(),$(".shipping-left, .shipping-right").dropdown({inDuration:300,outDuration:225,constrain_width:!1,hover:!1,gutter:0,belowOrigin:!0,alignment:"left"}),$(".shipping-list a").click(function(){var a=$(this).closest("ul").attr("id"),b=$('a[data-activates="'+a+'"]');b.html($(this).html()),loadShipping()}),$(".try-another").click(function(){return $("html, body").animate({scrollTop:350},"slow"),!1}),$(".sort-shipping").click(function(){var a=$("section.analysis");a.toggleClass("sort-averages"),a.hasClass("sort-averages")?$(this).html("sort by default"):$(this).html("sort by averages"),drawShippingDetails(),drawShippingGraph()}),$("main").on("click",".teehee",function(){g_teehee.play()}),$("main").on("click",".category",function(){var a=$(this).html().trim();showMoreInformation(a)}),loadShipping()});