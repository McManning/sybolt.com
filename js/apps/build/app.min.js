/*! Sybolt 30-08-2015 */

require.config({paths:{jquery:"vendor/jquery-2.1.1",underscore:"vendor/underscore",backbone:"vendor/backbone",text:"vendor/text",verify:"vendor/verify",notify:"vendor/notify-custom",serializejson:"vendor/jquery.serializejson",tubular:"vendor/jquery.tubular",isotope:"vendor/isotope.pkgd.no-amd",packerymode:"vendor/packery-mode.pkgd.no-amd","jquery.select2":"vendor/select2",flowplayer:"//releases.flowplayer.org/js/flowplayer-3.2.13",test:"apps/test",live:"apps/live",minecraft:"apps/build/minecraft.min"},shim:{flowplayer:{exports:"Flowplayer"},notify:{deps:["jquery"],exports:"$.notify",init:function(a){a.notify.addStyle("sybolt",{html:"<div>\n<span data-notify-text></span>\n</div>",classes:{base:{padding:"3px 10px","background-color":"#fcf8e3",border:"1px solid #fbeed5","border-radius":"4px","white-space":"nowrap","background-repeat":"no-repeat","background-position":"3px 7px"},error:{color:"#FFFFFF","background-color":"#9D2B2B","border-color":"#9D2B2B",background:""},success:{color:"#FFFFFF","background-color":"#09AD7E","border-color":"#09AD7E",background:""},info:{color:"#FFFFFF","background-color":"#977FA6","border-color":"#977FA6",background:""},warn:{color:"#FFFFFF","background-color":"#FF9815","border-color":"#FF9815",background:""}}}),a.notify.defaults({style:"sybolt"})}},serializejson:{deps:["jquery"],exports:"$.serializeJSON",init:function(a){a.serializeJSON.defaultOptions.parseAll=!0,a.serializeJSON.defaultOptions.checkboxUncheckedValue="false",a.serializeJSON.defaultOptions.useIntKeysAsArrayIndex=!0}},tubular:{deps:["jquery"],exports:"$.tubular",init:function(a){}},isotope:{deps:["jquery"],exports:"$.isotope"},packerymode:{deps:["jquery","isotope"]},verify:{deps:["jquery","notify"],init:function(a,b){a.verify({debug:!1,autoInit:!0,validationEventTrigger:"blur",scroll:!0,focusFirstField:!0,hideErrorOnChange:!1,skipHiddenFields:!0,skipDisabledFields:!0,showPrompt:!0,prompt:function(a,b,c){var d=a.parent().find('div.validation-error[data-for="'+a.attr("id")+'"]');b?d.html(b).removeClass("hidden"):d.addClass("hidden")}}),a.verify.addRules({newPasswordConfirm:function(a){var b=a.form.find('input[name="password"]').val(),c=a.val();return b!==c?"Passwords do not match":!0}})}}}}),define(["jquery","underscore","backbone","verify"],function(a,b,c){var d=c.Router.extend({routes:{":app(/:section)":"app"},app:function(a,b){require([a],function(b){b?f.loadApp(b):alert("App ["+a+"] not found")})}}),e=c.View.extend({el:a("header"),events:{"click .header-logo":"onHeaderLogoClick","click #mmm-hamburgers":"onHamburgerClick","click .login-button":"onLoginClick","click .logout-button":"onLogoutClick"},onLogoutClick:function(){a.ajax({type:"DELETE",url:App.getApiBaseUrl()+"/authenticate",dataType:"json",crossDomain:!0,xhrFields:{withCredentials:!0},success:function(a){console.log("success",a),window.location.reload()},error:function(a){alert(a.responseJSON.message),window.location.reload()}})},onLoginClick:function(){var b=a("form.login-form");return b.validate(function(c){c&&a.ajax({type:"POST",url:App.getApiBaseUrl()+"/authenticate",data:b.serialize(),dataType:"json",crossDomain:!0,xhrFields:{withCredentials:!0},success:function(a){console.log("success",a),window.location.reload()},error:function(a){a.responseJSON?alert(a.responseJSON.message):alert("An unspecified error has occurred while trying to login.")}})}),!1},onHamburgerClick:function(){return this.toggleNavigation(),!1},onHeaderLogoClick:function(){return f.router.navigate("home",{trigger:!0}),!1},toggleNavigation:function(){return a("header").hasClass("open")?this.hideNavigation():this.showNavigation(),!1},showNavigation:function(){return a("header").addClass("open").removeClass("closed"),a(".header-navigation").addClass("open"),a("#mmm-hamburgers").addClass("open"),!1},hideNavigation:function(){return a("header").removeClass("open"),a(".header-navigation").removeClass("open"),a("#mmm-hamburgers").removeClass("open"),a(".login .validation-error").addClass("hidden"),a(".login .error").removeClass("error"),window.setTimeout(function(){a("header").addClass("closed")},500),!1},render:function(){return this.$el.html(this.template({style:this.style,profile:f.profile})),a("form.login-form").verify(),this},setStyle:function(a){return console.log("Setting style to "+a),this.$el.removeClass(this.style+"-style").addClass(a+"-style"),this.style=a,this.hideNavigation(),this}}),f={initialize:function(){this.router=new d,this.header=new e,this.app=null,c.history.start({pushState:!0,root:"/"})||console.log("Initial url does not match in router"),a(document).on("click","a:not([data-bypass])",function(b){var d={prop:a(this).prop("href"),attr:a(this).attr("href")},e=location.protocol+"//"+location.host+c.history.options.root;d.prop&&d.prop.slice(0,e.length)===e&&(b.preventDefault(),c.history.navigate(d.attr,!0))}),a("input").keyup(function(b){13==b.keyCode&&a(this).trigger("enter")})},loadApp:function(a){this.app=a;var b=a.getView();this.setContentView(new b),this.header.hideNavigation()},setContentView:function(b){this.contentView&&(this.contentView.setElement(null),this.contentView.close()),this.contentView=b,this.contentView.setElement(a("main")).render(),a(window).scrollTop(0)},getApiBaseUrl:function(){return"//"+document.domain+":8888/api"}};return f.initialize(),window.Sybolt=f,f});
//# sourceMappingURL=app.min.js.map